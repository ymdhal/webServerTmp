{
  "version": "3.3",
  "services": {
    "project1": {
      "build": {
        "context": "./docker",
        "dockerfile": "nginx.dockerfile"
      },
      "command": "/bin/sh /var/www/pj1/setup/setup.sh",
      "volumes": [
        "./app1/uwsgi:/var/www/pj1",
        "./app1/socket:/var/www/pj1/socket",
        "./app1/setup:/var/www/pj1/setup",
        "./app1/flask:/var/www/pj1/src",
        "./app1/mariadb/volume:/var/www/pj1/src/database"
      ],
      "ports": [
        "8030:8030"
      ],
      "container_name": "project1"
    },
    "nginx": {
      "image": "nginx",
      "container_name": "nginx",
      "volumes": [
        "./nginx/default.conf:/etc/nginx/conf.d/default.conf",
        "./app1/socket:/var/www/pj1/socket",
        "./app2/socket:/var/www/pj2/socket"
      ],
      "ports": [
        "80:80"
      ],
      "links": [
        "project1"
      ]
    },
    "project2": {
      "container_name": "project2",
      "build": {
        "context": "./docker",
        "dockerfile": "nginx.dockerfile"
      },
      "command": "/bin/sh /var/www/pj2/setup/setup.sh",
      "volumes": [
        "./app2/uwsgi:/var/www/pj2",
        "./app2/socket:/var/www/pj2/socket",
        "./app2/setup:/var/www/pj2/setup",
        "./app2/flask:/var/www/pj2/src",
        "./app2/mariadb/volume:/var/www/pj2/src/database"
      ],
      "ports": [
        "8040:8040"
      ]
    }
  }
}
